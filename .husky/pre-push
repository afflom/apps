#!/bin/sh

echo "Running essential checks for push..."
npm run typecheck && npm run lint && npm run format:check && npm run test

if [ $? -ne 0 ]; then
  echo "ERROR: Tests or checks failed. Fix issues before pushing."
  exit 1
fi

echo ""
echo "Building app for GitHub Pages deployment validation..."
npm run build

if [ $? -ne 0 ]; then
  echo "ERROR: Build failed. Fix build issues before pushing."
  exit 1
fi

echo ""
echo "Checking if GitHub repo is properly configured for deployments..."

# Skip any direct GitHub Pages checks - GitHub Actions will handle this
# This is simpler and more reliable across different environments
echo "⚠️ Please ensure GitHub Pages is enabled in your repo settings"
echo "⚠️ GitHub Actions will attempt to deploy to the appropriate environments"

echo "✅ GitHub Actions will deploy changes to the appropriate environment."

echo "✅ All checks passed! Push can proceed."